(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{18:function(t,e){t.exports={API_ENDPOINTS:{historyActivity:"/history",scheduledActivity:"/scheduled"}}},34:function(t,e,a){"use strict";a.r(e),a.d(e,"findFreeSpots",function(){return r}),a.d(e,"get7DaysRange",function(){return s});var n=a(12),i=a(2);function c(t,e){var a=new i(t,"HH:mm"),n=new i(e,"HH:mm");return i(a).isSameOrBefore(n)}var r=function(t,e){if(0===t.length)return o("08:00","22:00",e);var a=[],i=t[0].startTime,r=t[t.length-1].endTime;c("08:00",i)&&a.push.apply(a,Object(n.a)(o("08:00",i,e)));for(var s=1;s<t.length;s++){var l=t[s-1].endTime,m=t[s].startTime;a.push.apply(a,Object(n.a)(o(l,m,e)))}return c(r,"22:00")&&a.push.apply(a,Object(n.a)(o(r,"22:00",e))),a};function o(t,e,a){var n=new i(t,"HH:mm"),r=new i(e,"HH:mm");if(i.duration(r.diff(n)).asMinutes()<a)return[];for(var o=[];c(n,r);)c(new i(n,"HH:mm").add(a,"minutes"),e)&&o.push(n.format("HH:mm")),n=new i(n,"HH:mm").add(a,"minutes");return o}var s=function(){for(var t=[],e=i(),a=1;a<=7;a++)if(1===a){var n=new i(e).add(a,"days").set({hour:0,minute:0,second:0,millisecond:0});t.push({timestamp:1e3*n.unix(),date:n.format("MM/DD/YYYY")})}else if(7===a){var c=new i(e).add(a,"days").set({hour:23,minute:59,second:59,millisecond:0});t.push({timestamp:1e3*c.unix(),date:c.format("MM/DD/YYYY")})}else{var r=new i(e).add(a,"days");t.push({timestamp:1e3*r.unix(),date:r.format("MM/DD/YYYY")})}return console.log(t),t}},35:function(t,e,a){t.exports=a.p+"static/media/icn_surfing.8f01c192.svg"},36:function(t,e,a){t.exports=a.p+"static/media/icn_hiking.fa259032.svg"},37:function(t,e,a){t.exports=a.p+"static/media/icn_weights.c2141e59.svg"},38:function(t,e,a){t.exports=a.p+"static/media/icn_spin.0ff7c39a.svg"},43:function(t,e,a){t.exports=a.p+"static/media/logo_header_wide.fb5a644c.svg"},44:function(t,e,a){t.exports=a.p+"static/media/icn_plus.51894886.svg"},47:function(t,e,a){t.exports=a(91)},52:function(t,e,a){},57:function(t,e,a){},59:function(t,e,a){},79:function(t,e,a){},80:function(t,e,a){t.exports=a.p+"static/media/surfing@2x.ed502d78.png"},81:function(t,e,a){t.exports=a.p+"static/media/hiking@2x.cc9e518b.png"},82:function(t,e,a){t.exports=a.p+"static/media/weights@2x.b5299319.png"},83:function(t,e,a){t.exports=a.p+"static/media/spinning@2x.f1ef8e0e.png"},84:function(t,e,a){},85:function(t,e,a){},86:function(t,e,a){},87:function(t,e,a){t.exports=a.p+"static/media/icn_surfing_light.0894d1dc.svg"},88:function(t,e,a){t.exports=a.p+"static/media/icn_hiking_light.37e66559.svg"},89:function(t,e,a){t.exports=a.p+"static/media/icn_weights_light.89707b0a.svg"},90:function(t,e,a){t.exports=a.p+"static/media/icn_spin_light.1e82ae6d.svg"},91:function(t,e,a){"use strict";a.r(e);var n=a(0),i=a.n(n),c=a(39),r=a.n(c),o=(a(52),a(14)),s=a(15),l=a(41),m=a(42),u=a.n(m),d="SELECT_ACTIVITY",p="CLEAR_ACTIVITY",v="ADD_ACTIVITY_HISTORY_SUCCESS",y="ADD_ACTIVITY_HISTORY_FAILURE",h="GET_ACTIVITY_HISTORY",f="GET_ACTIVITY_SCHEDULED",g="ADD_ACTIVITY_SCHEDULED_FAILURE",E="ADD_ACTIVITY_SCHEDULED_SUCCESS",b=a(12),A=Object(s.c)({user:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"LOGGED_USER":return e.user;default:return t}},activity:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case d:return e.payload;case p:return null;default:return t}},historyActivity:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case h:return e.payload;case v:return[].concat(Object(b.a)(t),[e.payload]);case y:default:return t}},scheduledActivity:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case f:return e.payload;case E:return[].concat(Object(b.a)(t),[e.payload]);case g:default:return t}}});var _=a(93),k=a(3),O=a(4),N=a(6),j=a(5),T=a(7),C=a(92),D=a(43),x=a.n(D),S=function(){return i.a.createElement("div",{className:"header shadow"},i.a.createElement("img",{src:x.a}))},w=function(t){function e(){return Object(k.a)(this,e),Object(N.a)(this,Object(j.a)(e).apply(this,arguments))}return Object(T.a)(e,t),Object(O.a)(e,[{key:"render",value:function(){var t=this.props,e=t.name,a=t.desc,n=t.bgImg,c=t.logo,r=t.onClick;return i.a.createElement("section",{className:"wrapper card-item",onClick:r},i.a.createElement("div",{className:"card-image"},i.a.createElement("img",{src:n})),i.a.createElement("div",{className:"card-icon"},i.a.createElement("img",{src:c})),i.a.createElement("div",{className:"card-info"},i.a.createElement("h1",null,e),i.a.createElement("p",null,a)))}}]),e}(n.Component);w.defaultProps={onClick:function(){}};var I=w,H=a(11),Y=a.n(H),P=a(44),M=a.n(P),B=a(94),R=(a(57),a(2)),V=a.n(R),F=function(t){function e(){var t,a;Object(k.a)(this,e);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(a=Object(N.a)(this,(t=Object(j.a)(e)).call.apply(t,[this].concat(c))))._renderHistoryCircles=function(){var t=a.props.items,e=void 0===t?[]:t;return((e=Y.a.sortBy(e,"startTime")).length>7?e:[0,0,0,0,0,0,0]).map(function(t,a){return e[a]?i.a.createElement("div",{key:a,className:"flex-center",style:{marginRight:"20px"}},i.a.createElement("div",{className:"activity-logo",style:{width:"60px",height:"60px",minWidth:"60px"}},i.a.createElement("img",{src:e[a].logo})),i.a.createElement("p",{style:{marginTop:"9px",fontFamily:"europa",color:"#8D8C8C",fontSize:"12px"}},e[a].time?e[a].time:e[a].startTime)):i.a.createElement("div",{key:a,className:"activity-circle"})})},a}return Object(T.a)(e,t),Object(O.a)(e,[{key:"render",value:function(){var t=this.props,e=t.month,a=t.items,n=void 0===a?[]:a,c=n.length>0?n[0].timestamp:e;return i.a.createElement("div",{className:"activity-track-container"},i.a.createElement("p",{className:"activity-btn"},"".concat(V()(c).format("MMMM")," ").concat(V()(c).format("DD"))),i.a.createElement("p",{className:"title",style:{margin:0}},V()(c).format("dddd")),i.a.createElement("div",{className:"card-list activity-track"},this._renderHistoryCircles()))}}]),e}(n.Component),U=function(t){function e(){var t,a;Object(k.a)(this,e);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(a=Object(N.a)(this,(t=Object(j.a)(e)).call.apply(t,[this].concat(c))))._renderTracks=function(){var t=a.props.data,e=Y.a.groupBy(Y.a.sortBy(t,"date"),"date");return Object.keys(e).map(function(t,a){return i.a.createElement(F,{key:a,items:e[t],month:t})})},a}return Object(T.a)(e,t),Object(O.a)(e,[{key:"_renderEmptyTrack",value:function(){return i.a.createElement("p",{className:"empty-activity"},"You don't have any activities scheduled yet.")}},{key:"render",value:function(){var t=this;console.log("Prop",this.props);var e=this.props.data,a=void 0===e?[]:e;return i.a.createElement("div",null,a.length?this._renderTracks():this._renderEmptyTrack(),i.a.createElement("div",{className:"activity-btn-wrapper",onClick:function(){return t.props.history.push("/schedule",{})}},i.a.createElement("img",{src:M.a}),i.a.createElement("div",{className:"activity-btn"},"SCHEDULE ACTIVITY")))}}]),e}(n.Component),L=Object(B.a)(U),W=(a(59),function(t){function e(t){var a;return Object(k.a)(this,e),(a=Object(N.a)(this,Object(j.a)(e).call(this,t)))._renderTracks=function(){var t=a.props.data,e=Y.a.groupBy(Y.a.sortBy(t,"date"),"date");return Object.keys(e).map(function(t,a){return i.a.createElement(F,{key:a,items:e[t],month:t})})},a}return Object(T.a)(e,t),Object(O.a)(e,[{key:"render",value:function(){return this.props.data.length?i.a.createElement("div",null,this._renderTracks()):i.a.createElement("div",null,i.a.createElement("p",{className:"empty-activity"},"You haven't tracked any activities yet."))}}]),e}(n.Component)),z=a(16),G=a(17),J=a.n(G),$=a(18);function q(t,e){return function(a){J.a.get("".concat($.API_ENDPOINTS.scheduledActivity,"?_sort=timestamp&_order=desc&timestamp_gte=").concat(t,"&timestamp_lte=").concat(e)).then(function(t){return 200===t.status?a({type:f,payload:t.data}):a({type:f,payload:[]})}).catch(function(t){return a({type:f,payload:[]})})}}a(79);var K=a(34).get7DaysRange,Q=[{name:"Surfing",desc:"OCEAN BEACH",bgImg:a(80),logo:a(35)},{name:"Hiking",desc:"TORREY PINES",bgImg:a(81),logo:a(36)},{name:"Weights",desc:"HEAVY WEIGHTS",bgImg:a(82),logo:a(37)},{name:"Spinning",desc:"ROUND AND ROUND",bgImg:a(83),logo:a(38)}],X=function(t){function e(t){var a;return Object(k.a)(this,e),(a=Object(N.a)(this,Object(j.a)(e).call(this,t)))._selectActivity=function(t){a.props.selectActivity(t),a.props.history.push("/activity",{})},a._renderActivityCards=function(){return Q.map(function(t,e){var n=t.name,c=t.desc,r=t.bgImg,o=t.logo;return i.a.createElement(I,{key:e,onClick:function(){return a._selectActivity(t)},name:n,desc:c,bgImg:r,logo:o})})},a.state={},a}return Object(T.a)(e,t),Object(O.a)(e,[{key:"componentDidMount",value:function(){this.props.getHistoryActivities();var t=K();this.props.getScheduledActivitiesForDate(t[0].timestamp,t[t.length-1].timestamp)}},{key:"render",value:function(){var t=this.props,e=t.historyActivity,a=t.scheduledActivities;return i.a.createElement("div",{className:"container"},i.a.createElement(S,null),i.a.createElement("div",{className:"body"},i.a.createElement("div",{className:"title",style:{paddingLeft:"20px"}},"Track Your Activity"),i.a.createElement("div",{style:{width:"100%"}},i.a.createElement("section",{className:"card-list"},this._renderActivityCards())),i.a.createElement("div",{className:"scheduled-activity"},i.a.createElement("div",{style:{padding:"20px"}},i.a.createElement("div",{className:"title"},"Scheduled Activities"),i.a.createElement(L,{data:a}))),i.a.createElement("div",{className:"activity-history"},i.a.createElement("div",{style:{padding:"20px"}},i.a.createElement("div",{className:"title"},"Activity History"),i.a.createElement(W,{data:e})))))}}]),e}(n.Component),Z=Object(o.b)(function(t){return{user:t.user,historyActivity:t.historyActivity,scheduledActivities:t.scheduledActivity}},{selectActivity:function(t){return function(e){return e({type:d,payload:t})}},getHistoryActivities:function(){return function(t){J.a.get($.API_ENDPOINTS.historyActivity).then(function(e){return 200===e.status?t({type:h,payload:e.data}):t({type:h,payload:[]})}).catch(function(e){return t({type:h,payload:[]})})}},getScheduledActivitiesForDate:q})(X),tt=a(21),et=function(t){function e(){return Object(k.a)(this,e),Object(N.a)(this,Object(j.a)(e).apply(this,arguments))}return Object(T.a)(e,t),Object(O.a)(e,[{key:"render",value:function(){return i.a.createElement("div",{className:"timer-container"},i.a.createElement("div",{className:"timer-minutes"},this.props.time),"--",i.a.createElement("p",{className:"activity-btn"}," Minutes"))}}]),e}(n.Component),at=(a(84),function(t){function e(t){var a;return Object(k.a)(this,e),(a=Object(N.a)(this,Object(j.a)(e).call(this,t))).momentCounter=function(){var t=new V.a,e=V.a.duration(t.diff(a.state.startTime));a.setState({time:"".concat(e.minutes().toFixed(0),":").concat(e.seconds().toFixed(0))})},a.componentWillReceiveProps=function(t){t.activity},a._goBack=function(){a.props.history.goBack(),a.props.clearActivity()},a._onPressPause=function(){clearInterval(a.timer),a._saveActivity(),a._goBack()},a._saveActivity=function(){var t=new Date,e=V()(t,"YYYY/MM/DD").format("MM/DD/YYYY");a.props.addHistoryActivity(Object(z.a)({},a.props.activity,{date:e,time:a.state.startTime.format("HH:mm"),trackedTime:a.state.time,timestamp:t.getTime()}))},a.state={seconds:11200,time:(new V.a).format("HH:mm"),startTime:""},a.timer=0,a.startTimer=a.startTimer.bind(Object(tt.a)(a)),a}return Object(T.a)(e,t),Object(O.a)(e,[{key:"componentWillMount",value:function(){if(!this.props.activity)return this.props.history.replace("/")}},{key:"componentDidMount",value:function(){var t=this;this.setState({startTime:new V.a},function(){return t.momentCounter()}),this.startTimer()}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"startTimer",value:function(){0===this.timer&&(this.timer=setInterval(this.momentCounter,1e3))}},{key:"render",value:function(){var t=this.props.activity||{},e=t.logo,a=t.name;return i.a.createElement("div",{className:"container-activity"},i.a.createElement("div",{className:"background-img"}),i.a.createElement("div",{className:"header-activity",onClick:this._goBack},i.a.createElement("ion-icon",{name:"ios-arrow-back",style:{color:"white",fontSize:29}})),i.a.createElement("div",{className:"flex-center",style:{height:"170px",justifyContent:"space-evenly"}},i.a.createElement("p",{className:"activity-btn"}," CURRENT ACTIVITY"),i.a.createElement("div",{className:"activity-logo",style:{width:"70px",height:"70px"}},i.a.createElement("img",{src:e})),i.a.createElement("p",{style:{fontFamily:"europa",fontWeight:"700",fontSize:"18px"}},a)),i.a.createElement(et,{time:this.state.time}),i.a.createElement("div",{className:"flex-center"},i.a.createElement("p",{style:{width:"186px",fontSize:"24px",fontFamily:"europa",lineHeight:"1.1",textAlign:"center",paddingBottom:"20px"}},"Activity Tracking in Progress..."),i.a.createElement("div",{className:"pause-container",onClick:this._onPressPause},i.a.createElement("div",{className:"pause-btn"}))))}}]),e}(n.Component)),nt=Object(B.a)(Object(o.b)(function(t){return{activity:t.activity}},{clearActivity:function(){return{type:p}},addHistoryActivity:function(t){return function(e){J.a.post($.API_ENDPOINTS.historyActivity,Object(z.a)({},t)).then(function(t){return console.log("resp",t),201===t.status?e({type:v,payload:t.data}):e({type:y})}).catch(function(t){return e({type:y})})}}})(at));function it(){return i.a.createElement(nt,null)}a(85),a(86);var ct=a(34),rt=ct.get7DaysRange,ot=ct.findFreeSpots,st=[{name:"Surfing",logo:a(35),logo_light:a(87)},{name:"Hiking",logo:a(36),logo_light:a(88)},{name:"Weights",logo:a(37),logo_light:a(89)},{name:"Spinning",logo:a(38),logo_light:a(90)}],lt=function(t){function e(t){var a;return Object(k.a)(this,e),(a=Object(N.a)(this,Object(j.a)(e).call(this,t))).componentWillReceiveProps=function(t){t.activity},a._goBack=function(){a.props.history.goBack()},a._onChangeTimeActivity=function(t){a.setState({timeActivityValue:t})},a._onChangeDateActivity=function(t){console.log("change picker val",V()(t).format("MM/DD")),a.setState({dateActivityValue:t})},a._renderActivityPicker=function(){return st.map(function(t,e){return t.name===a.state.activityPicked.name?i.a.createElement("div",{key:e,className:"flex-center",onClick:function(){return a.setState({activityPicked:t})}},i.a.createElement("div",{className:"activity-icon-active"},i.a.createElement("img",{src:t.logo_light})),i.a.createElement("p",{className:"activity-btn"},t.name.toUpperCase())):i.a.createElement("div",{key:e,className:"flex-center",onClick:function(){return a.setState({activityPicked:t})}},i.a.createElement("div",{className:"activity-icon"},i.a.createElement("img",{src:t.logo})),i.a.createElement("p",{className:"activity-btn"},t.name.toUpperCase()))})},a._isButtonEnabled=function(){var t=a.state,e=t.dateActivityValue,n=t.timeActivityValue,i=t.activityPicked;return!1!==e&&!1!==n&&!1!==i},a._renderTimeSlots=function(){var t=[],e=Y.a.groupBy(a.props.scheduledActivities,"date");return Object(b.a)(a.state.dateRange).map(function(n){ot(Y.a.sortBy(e[n],"timestamp")||[],a.state.timeActivityValue).map(function(e){t.push("".concat(V()(n).format("ddd DD MMM")," ").concat(e))})}),t.map(function(t,e){return i.a.createElement("option",{key:e,value:t},t)})},a._onSubmitForm=function(){console.log("data to submit",a.state);var t=a.state,e=t.activityPicked,n=e.name,i=e.logo,c=t.dateActivityValue,r=t.timeActivityValue,o=V()(c).format("MM/DD/")+V()().format("YYYY"),s={name:n,logo:i,date:o,startTime:V()(c).format("HH:mm"),endTime:V()(c).add(r,"minutes").format("HH:mm"),timestamp:1e3*V()(o).unix()};console.log("formData",s),a.props.addScheduledActivity(s),a._goBack()},a.state={timeActivityValue:15,dateActivityValue:!1,activityPicked:!1,dateRange:[]},a.refTimePicker=!1,a.refDatePicker=!1,a}return Object(T.a)(e,t),Object(O.a)(e,[{key:"componentDidMount",value:function(){var t=rt();this.props.getScheduledActivitiesForDate(t[0].timestamp,t[t.length-1].timestamp),this.setState({dateRange:t.map(function(t){return t.date})})}},{key:"render",value:function(){var t=this;return i.a.createElement("div",{className:"container-sch-activity"},i.a.createElement("div",{className:"header-activity",onClick:this._goBack},i.a.createElement("ion-icon",{name:"close",style:{fontSize:29,paddingLeft:"20px"}})),i.a.createElement("p",{className:"activity-title"}," Schedule your activity"),i.a.createElement("div",{className:"activity-picker"},this._renderActivityPicker()),i.a.createElement("div",{className:"flex-center",style:{marginTop:"40px",marginBottom:"40px"}},i.a.createElement("p",{className:"select-title"},"How long do you want to do this activity?"),i.a.createElement("div",{className:"select"},i.a.createElement("select",{name:"slct",id:"slct",onChange:function(e){return t._onChangeTimeActivity(e.target.value)},value:this.state.timeActivityValue},i.a.createElement("option",{value:"15"},"15 min"),i.a.createElement("option",{value:"30"},"30 min"),i.a.createElement("option",{value:"45"},"45 min"),i.a.createElement("option",{value:"60"},"1 h"),i.a.createElement("option",{value:"90"},"1h 30 min"),i.a.createElement("option",{value:"120"},"2 h"),i.a.createElement("option",{value:"150"},"2h 30 min"),i.a.createElement("option",{value:"180"},"3 h")))),i.a.createElement("div",{className:"flex-center"},i.a.createElement("p",{className:"select-title"},"When do you want to do this activity?"),i.a.createElement("div",{className:"select"},i.a.createElement("select",{name:"slct",id:"slct",onChange:function(e){return t._onChangeDateActivity(e.target.value)},value:this.state.dateActivityValue},i.a.createElement("option",null,"Pick a date & time or find a free slot"),this._renderTimeSlots()))),i.a.createElement("div",{className:"activity-btn-wrapper btn-bottom ".concat(this._isButtonEnabled()?"":"disabled"),onClick:function(){t._isButtonEnabled()&&t._onSubmitForm()}},i.a.createElement("div",{className:"activity-btn"},"SCHEDULE")))}}]),e}(n.Component),mt=Object(B.a)(Object(o.b)(function(t){return{activity:t.activity,scheduledActivities:t.scheduledActivity}},{addScheduledActivity:function(t){return function(e){J.a.post($.API_ENDPOINTS.scheduledActivity,Object(z.a)({},t)).then(function(t){return console.log("resp",t),201===t.status?e({type:E,payload:t.data}):e({type:g})}).catch(function(t){return e({type:g})})}},getScheduledActivitiesForDate:q})(lt));function ut(t){return i.a.createElement(mt,null)}var dt=function(t){function e(){return Object(k.a)(this,e),Object(N.a)(this,Object(j.a)(e).apply(this,arguments))}return Object(T.a)(e,t),Object(O.a)(e,[{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(C.a,{exact:!0,path:"/",component:Z}),i.a.createElement(C.a,{path:"/activity",component:it}),i.a.createElement(C.a,{path:"/schedule",component:ut}))}}]),e}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var pt=Object(s.d)(A,Object(s.a)(l.a,u.a));console.warn=function(){},r.a.render(i.a.createElement(o.a,{store:pt},i.a.createElement(_.a,null,i.a.createElement(dt,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[47,1,2]]]);
//# sourceMappingURL=main.531962e0.chunk.js.map