(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(e,t){e.exports={API_ENDPOINTS:{historyActivity:"/history",scheduledActivity:"/scheduled"}}},34:function(e,t,a){"use strict";a.r(t),a.d(t,"findFreeSpots",function(){return r}),a.d(t,"get7DaysRange",function(){return s});var n=a(14),i=a(8);function c(e,t){var a=new i(e,"HH:mm"),n=new i(t,"HH:mm");return i(a).isSameOrBefore(n)}var r=function(e,t){if(0===e.length)return o("08:00","22:00",t);var a=[],i=e[0].startTime,r=e[e.length-1].endTime;c("08:00",i)&&a.push.apply(a,Object(n.a)(o("08:00",i,t)));for(var s=1;s<e.length;s++){var l=e[s-1].end,u=e[s].start;a.push.apply(a,Object(n.a)(o(l,u,t)))}return c(r,"22:00")&&a.push.apply(a,Object(n.a)(o(r,"22:00",t))),a};function o(e,t,a){var n=new i(e,"HH:mm"),r=new i(t,"HH:mm");if(i.duration(r.diff(n)).asMinutes()<a)return[];for(var o=[];c(n,r);)c(new i(n,"HH:mm").add(a,"minutes"),t)&&o.push(n.format("HH:mm")),n=new i(n,"HH:mm").add(a,"minutes");return o}var s=function(){for(var e=[],t=i(),a=1;a<=7;a++)1===a?e.push(1e3*new i(t).add(a,"days").set({hour:0,minute:0,second:0,millisecond:0}).unix()):7===a?e.push(1e3*new i(t).add(a,"days").set({hour:23,minute:59,second:59,millisecond:0}).unix()):e.push(1e3*new i(t).add(a,"days").unix());return console.log(e),e}},35:function(e,t,a){e.exports=a.p+"static/media/icn_surfing.8f01c192.svg"},36:function(e,t,a){e.exports=a.p+"static/media/icn_hiking.fa259032.svg"},37:function(e,t,a){e.exports=a.p+"static/media/icn_weights.c2141e59.svg"},38:function(e,t,a){e.exports=a.p+"static/media/icn_spin.0ff7c39a.svg"},43:function(e,t,a){e.exports=a.p+"static/media/logo_header_wide.fb5a644c.svg"},44:function(e,t,a){e.exports=a.p+"static/media/icn_plus.51894886.svg"},47:function(e,t,a){e.exports=a(91)},52:function(e,t,a){},57:function(e,t,a){},59:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){e.exports=a.p+"static/media/surfing@2x.ed502d78.png"},81:function(e,t,a){e.exports=a.p+"static/media/hiking@2x.cc9e518b.png"},82:function(e,t,a){e.exports=a.p+"static/media/weights@2x.b5299319.png"},83:function(e,t,a){e.exports=a.p+"static/media/spinning@2x.f1ef8e0e.png"},84:function(e,t,a){},85:function(e,t,a){},86:function(e,t,a){},87:function(e,t,a){e.exports=a.p+"static/media/icn_surfing_light.0894d1dc.svg"},88:function(e,t,a){e.exports=a.p+"static/media/icn_hiking_light.37e66559.svg"},89:function(e,t,a){e.exports=a.p+"static/media/icn_weights_light.89707b0a.svg"},90:function(e,t,a){e.exports=a.p+"static/media/icn_spin_light.1e82ae6d.svg"},91:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),c=a(39),r=a.n(c),o=(a(52),a(12)),s=a(16),l=a(41),u=a(42),m=a.n(u),d="SELECT_ACTIVITY",p="CLEAR_ACTIVITY",v="ADD_ACTIVITY_HISTORY_SUCCESS",y="ADD_ACTIVITY_HISTORY_FAILURE",h="GET_ACTIVITY_HISTORY",f="GET_ACTIVITY_SCHEDULED",g="ADD_ACTIVITY_SCHEDULED_FAILURE",E="ADD_ACTIVITY_SCHEDULED_SUCCESS",b=a(14),A=Object(s.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGGED_USER":return t.user;default:return e}},activity:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return t.payload;case p:return null;default:return e}},historyActivity:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return t.payload;case v:return[].concat(Object(b.a)(e),[t.payload]);case y:default:return e}},scheduledActivity:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return t.payload;case E:return[].concat(Object(b.a)(e),[t.payload]);case g:default:return e}}});var O=a(93),_=a(2),k=a(3),N=a(5),j=a(4),C=a(6),T=a(92),x=a(43),S=a.n(x),D=function(){return i.a.createElement("div",{className:"header shadow"},i.a.createElement("img",{src:S.a}))},w=function(e){function t(){return Object(_.a)(this,t),Object(N.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(C.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){var e=this.props,t=e.name,a=e.desc,n=e.bgImg,c=e.logo,r=e.onClick;return i.a.createElement("section",{className:"wrapper card-item",onClick:r},i.a.createElement("div",{className:"card-image"},i.a.createElement("img",{src:n})),i.a.createElement("div",{className:"card-icon"},i.a.createElement("img",{src:c})),i.a.createElement("div",{className:"card-info"},i.a.createElement("h1",null,t),i.a.createElement("p",null,a)))}}]),t}(n.Component);w.defaultProps={onClick:function(){}};var I=w,H=a(13),P=a.n(H),Y=a(44),B=a.n(Y),M=a(94),V=(a(57),a(8)),R=a.n(V),U=function(e){function t(){var e,a;Object(_.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(a=Object(N.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(c))))._renderHistoryCircles=function(){var e=a.props.items,t=void 0===e?[]:e;return(t.length>7?t:[0,0,0,0,0,0,0]).map(function(e,a){return t[a]?i.a.createElement("div",{key:a,className:"flex-center",style:{marginRight:"20px"}},i.a.createElement("div",{className:"activity-logo",style:{width:"60px",height:"60px",minWidth:"60px"}},i.a.createElement("img",{src:t[a].logo})),i.a.createElement("p",{style:{marginTop:"9px",fontFamily:"europa",color:"#8D8C8C",fontSize:"12px"}},t[a].time?t[a].time:t[a].startTime)):i.a.createElement("div",{key:a,className:"activity-circle"})})},a}return Object(C.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){var e=this.props,t=e.month,a=e.items,n=void 0===a?[]:a,c=n.length>0?n[0].timestamp:t;return i.a.createElement("div",{className:"activity-track-container"},i.a.createElement("p",{className:"activity-btn"},"".concat(R()(c).format("MMMM")," ").concat(R()(c).format("DD"))),i.a.createElement("p",{className:"title",style:{margin:0}},R()(c).format("dddd")),i.a.createElement("div",{className:"card-list activity-track"},this._renderHistoryCircles()))}}]),t}(n.Component),F=function(e){function t(){var e,a;Object(_.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(a=Object(N.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(c))))._renderTracks=function(){var e=a.props.data,t=P.a.groupBy(P.a.sortBy(e,"date"),"date");return Object.keys(t).map(function(e,a){return i.a.createElement(U,{key:a,items:t[e],month:e})})},a}return Object(C.a)(t,e),Object(k.a)(t,[{key:"_renderEmptyTrack",value:function(){return i.a.createElement("p",{className:"empty-activity"},"You don't have any activities scheduled yet.")}},{key:"render",value:function(){var e=this;console.log("Prop",this.props);var t=this.props.data,a=void 0===t?[]:t;return i.a.createElement("div",null,a.length?this._renderTracks():this._renderEmptyTrack(),i.a.createElement("div",{className:"activity-btn-wrapper",onClick:function(){return e.props.history.push("/schedule",{})}},i.a.createElement("img",{src:B.a}),i.a.createElement("div",{className:"activity-btn"},"SCHEDULE ACTIVITY")))}}]),t}(n.Component),W=Object(M.a)(F),L=(a(59),function(e){function t(e){var a;return Object(_.a)(this,t),(a=Object(N.a)(this,Object(j.a)(t).call(this,e)))._renderTracks=function(){var e=a.props.data,t=P.a.groupBy(P.a.sortBy(e,"date"),"date");return Object.keys(t).map(function(e,a){return i.a.createElement(U,{key:a,items:t[e],month:e})})},a}return Object(C.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){return this.props.data.length?i.a.createElement("div",null,this._renderTracks()):i.a.createElement("div",null,i.a.createElement("p",{className:"empty-activity"},"You haven't tracked any activities yet."))}}]),t}(n.Component)),z=a(17),G=a(18),J=a.n(G),$=a(19);function q(e,t){return function(a){J.a.get("".concat($.API_ENDPOINTS.scheduledActivity,"?_sort=timestamp&_order=desc&timestamp_gte=").concat(e,"&timestamp_lte=").concat(t)).then(function(e){return 200===e.status?a({type:f,payload:e.data}):a({type:f,payload:[]})}).catch(function(e){return a({type:f,payload:[]})})}}a(79);var K=a(34).get7DaysRange,Q=[{name:"Surfing",desc:"OCEAN BEACH",bgImg:a(80),logo:a(35)},{name:"Hiking",desc:"TORREY PINES",bgImg:a(81),logo:a(36)},{name:"Weights",desc:"HEAVY WEIGHTS",bgImg:a(82),logo:a(37)},{name:"Spinning",desc:"ROUND AND ROUND",bgImg:a(83),logo:a(38)}],X=function(e){function t(e){var a;return Object(_.a)(this,t),(a=Object(N.a)(this,Object(j.a)(t).call(this,e)))._selectActivity=function(e){a.props.selectActivity(e),a.props.history.push("/activity",{})},a._renderActivityCards=function(){return Q.map(function(e,t){var n=e.name,c=e.desc,r=e.bgImg,o=e.logo;return i.a.createElement(I,{key:t,onClick:function(){return a._selectActivity(e)},name:n,desc:c,bgImg:r,logo:o})})},a.state={},a}return Object(C.a)(t,e),Object(k.a)(t,[{key:"componentDidMount",value:function(){this.props.getHistoryActivities();var e=K();this.props.getScheduledActivitiesForDate(e[0],e[e.length-1])}},{key:"render",value:function(){var e=this.props,t=e.historyActivity,a=e.scheduledActivities;return i.a.createElement("div",{className:"container"},i.a.createElement(D,null),i.a.createElement("div",{className:"body"},i.a.createElement("div",{className:"title"},"Track Your Activity"),i.a.createElement("div",{style:{width:"100%"}},i.a.createElement("section",{className:"card-list"},this._renderActivityCards())),i.a.createElement("div",{className:"scheduled-activity"},i.a.createElement("div",{style:{padding:"20px"}},i.a.createElement("div",{className:"title"},"Scheduled Activities"),i.a.createElement(W,{data:a}))),i.a.createElement("div",{className:"activity-history"},i.a.createElement("div",{style:{padding:"20px"}},i.a.createElement("div",{className:"title"},"Activity History"),i.a.createElement(L,{data:t})))))}}]),t}(n.Component),Z=Object(o.b)(function(e){return{user:e.user,historyActivity:e.historyActivity,scheduledActivities:e.scheduledActivity}},{selectActivity:function(e){return function(t){return t({type:d,payload:e})}},getHistoryActivities:function(){return function(e){J.a.get($.API_ENDPOINTS.historyActivity).then(function(t){return 200===t.status?e({type:h,payload:t.data}):e({type:h,payload:[]})}).catch(function(t){return e({type:h,payload:[]})})}},getScheduledActivitiesForDate:q})(X),ee=a(15),te=function(e){function t(){return Object(_.a)(this,t),Object(N.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(C.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"timer-container"},i.a.createElement("div",{className:"timer-minutes"},this.props.time),"--",i.a.createElement("p",{className:"activity-btn"}," Minutes"))}}]),t}(n.Component),ae=(a(84),function(e){function t(e){var a;return Object(_.a)(this,t),(a=Object(N.a)(this,Object(j.a)(t).call(this,e))).momentCounter=function(){var e=new R.a,t=R.a.duration(e.diff(a.state.startTime));a.setState({time:"".concat(t.asMinutes().toFixed(0),":").concat(t.asSeconds().toFixed(0))})},a.componentWillReceiveProps=function(e){e.activity},a._goBack=function(){a.props.history.goBack(),a.props.clearActivity()},a._onPressPause=function(){clearInterval(a.timer),a._saveActivity(),a._goBack()},a._saveActivity=function(){var e=new Date,t=R()(e,"YYYY/MM/DD").format("MM/DD/YYYY");a.props.addHistoryActivity(Object(z.a)({},a.props.activity,{date:t,time:a.state.startTime.format("HH:mm"),trackedTime:a.state.time,timestamp:e.getTime()}))},a.state={seconds:11200,time:(new R.a).format("HH:mm"),startTime:""},a.timer=0,a.startTimer=a.startTimer.bind(Object(ee.a)(Object(ee.a)(a))),a}return Object(C.a)(t,e),Object(k.a)(t,[{key:"componentWillMount",value:function(){if(!this.props.activity)return this.props.history.replace("/")}},{key:"componentDidMount",value:function(){var e=this;this.setState({startTime:new R.a},function(){return e.momentCounter()}),this.startTimer()}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"startTimer",value:function(){0===this.timer&&(this.timer=setInterval(this.momentCounter,1e3))}},{key:"render",value:function(){var e=this.props.activity||{},t=e.logo,a=e.name;return i.a.createElement("div",{className:"container-activity"},i.a.createElement("div",{className:"background-img"}),i.a.createElement("div",{className:"header-activity",onClick:this._goBack},i.a.createElement("ion-icon",{name:"ios-arrow-back",style:{color:"white",fontSize:29}})),i.a.createElement("div",{className:"flex-center",style:{height:"170px",justifyContent:"space-evenly"}},i.a.createElement("p",{className:"activity-btn"}," CURRENT ACTIVITY"),i.a.createElement("div",{className:"activity-logo",style:{width:"70px",height:"70px"}},i.a.createElement("img",{src:t})),i.a.createElement("p",{style:{fontFamily:"europa",fontWeight:"700",fontSize:"18px"}},a)),i.a.createElement(te,{time:this.state.time}),i.a.createElement("div",{className:"flex-center"},i.a.createElement("p",{style:{width:"186px",fontSize:"24px",fontFamily:"europa",lineHeight:"1.1",textAlign:"center",paddingBottom:"20px"}},"Activity Tracking in Progress..."),i.a.createElement("div",{className:"pause-container",onClick:this._onPressPause},i.a.createElement("div",{className:"pause-btn"}))))}}]),t}(n.Component)),ne=Object(M.a)(Object(o.b)(function(e){return{activity:e.activity}},{clearActivity:function(){return{type:p}},addHistoryActivity:function(e){return function(t){J.a.post($.API_ENDPOINTS.historyActivity,Object(z.a)({},e)).then(function(e){return console.log("resp",e),201===e.status?t({type:v,payload:e.data}):t({type:y})}).catch(function(e){return t({type:y})})}}})(ae));function ie(){return i.a.createElement(ne,null)}a(85),a(86);var ce=a(34),re=ce.get7DaysRange,oe=ce.findFreeSpots,se=[{name:"Surfing",logo:a(35),logo_light:a(87)},{name:"Hiking",logo:a(36),logo_light:a(88)},{name:"Weights",logo:a(37),logo_light:a(89)},{name:"Spinning",logo:a(38),logo_light:a(90)}],le=function(e){function t(e){var a;return Object(_.a)(this,t),(a=Object(N.a)(this,Object(j.a)(t).call(this,e))).componentWillReceiveProps=function(e){e.activity},a._goBack=function(){a.props.history.goBack()},a._onChangeTimeActivity=function(e){a.setState({timeActivityValue:e})},a._onChangeDateActivity=function(e){a.setState({dateActivityValue:e})},a._renderActivityPicker=function(){return se.map(function(e,t){return e.name===a.state.activityPicked.name?i.a.createElement("div",{key:t,className:"flex-center",onClick:function(){return a.setState({activityPicked:e})}},i.a.createElement("div",{className:"activity-icon-active"},i.a.createElement("img",{src:e.logo_light})),i.a.createElement("p",{className:"activity-btn"},e.name.toUpperCase())):i.a.createElement("div",{key:t,className:"flex-center",onClick:function(){return a.setState({activityPicked:e})}},i.a.createElement("div",{className:"activity-icon"},i.a.createElement("img",{src:e.logo})),i.a.createElement("p",{className:"activity-btn"},e.name.toUpperCase()))})},a._isButtonEnabled=function(){var e=a.state,t=e.dateActivityValue,n=e.timeActivityValue,i=e.activityPicked;return!1!==t&&!1!==n&&!1!==i},a._renderTimeSlots=function(){var e=[],t=P.a.groupBy(a.props.scheduledActivities,"date");return Object.keys(t).map(function(n){var i=oe(t[n],a.state.timeActivityValue);console.log(R()(n).format("ddd DD MMM")),i.map(function(t){e.push("".concat(R()(n).format("ddd DD MMM")," ").concat(t))})}),console.log("All spots",e),e.map(function(e,t){return i.a.createElement("option",{key:t,value:"1"},e)})},a.state={timeActivityValue:15,dateActivityValue:!1,activityPicked:!1},a.refTimePicker=!1,a.refDatePicker=!1,a}return Object(C.a)(t,e),Object(k.a)(t,[{key:"componentDidMount",value:function(){var e=re();this.props.getScheduledActivitiesForDate(e[0],e[e.length-1])}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"container-sch-activity"},i.a.createElement("div",{className:"header-activity",onClick:this._goBack},i.a.createElement("ion-icon",{name:"close",style:{fontSize:29,paddingLeft:"20px"}})),i.a.createElement("p",{className:"activity-title"}," Schedule your activity"),i.a.createElement("div",{className:"activity-picker"},this._renderActivityPicker()),i.a.createElement("div",{className:"flex-center",style:{marginTop:"40px",marginBottom:"40px"}},i.a.createElement("p",{className:"select-title"},"How long do you want to do this activity?"),i.a.createElement("div",{className:"select"},i.a.createElement("select",{name:"slct",id:"slct",onChange:function(t){return e._onChangeTimeActivity(t.target.value)},value:this.state.timeActivityValue},i.a.createElement("option",{value:"15"},"15 min"),i.a.createElement("option",{value:"30"},"30 min"),i.a.createElement("option",{value:"45"},"45 min"),i.a.createElement("option",{value:"60"},"1 h"),i.a.createElement("option",{value:"90"},"1h 30 min"),i.a.createElement("option",{value:"120"},"2 h"),i.a.createElement("option",{value:"150"},"2h 30 min"),i.a.createElement("option",{value:"180"},"3 h")))),i.a.createElement("div",{className:"flex-center"},i.a.createElement("p",{className:"select-title"},"When do you want to do this activity?"),i.a.createElement("div",{className:"select"},i.a.createElement("select",{name:"slct",id:"slct",onChange:function(t){return e._onChangeDateActivity(t.target.value)},value:this.state.dateActivityValue},i.a.createElement("option",null,"Pick a date & time or find a free slot"),this._renderTimeSlots()))),i.a.createElement("div",{className:"activity-btn-wrapper btn-bottom ".concat(this._isButtonEnabled()?"":"disabled"),onClick:function(){e._isButtonEnabled()}},i.a.createElement("div",{className:"activity-btn"},"SCHEDULE")))}}]),t}(n.Component),ue=Object(M.a)(Object(o.b)(function(e){return{activity:e.activity,scheduledActivities:e.scheduledActivity}},{addScheduledActivity:function(e){return function(t){J.a.post($.API_ENDPOINTS.scheduledActivity,Object(z.a)({},e)).then(function(e){return console.log("resp",e),201===e.status?t({type:E,payload:e.data}):t({type:g})}).catch(function(e){return t({type:g})})}},getScheduledActivitiesForDate:q})(le));function me(e){return i.a.createElement(ue,null)}var de=function(e){function t(){return Object(_.a)(this,t),Object(N.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(C.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(T.a,{exact:!0,path:"/",component:Z}),i.a.createElement(T.a,{path:"/activity",component:ie}),i.a.createElement(T.a,{path:"/schedule",component:me}))}}]),t}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var pe=Object(s.d)(A,Object(s.a)(l.a,m.a));console.warn=function(){},r.a.render(i.a.createElement(o.a,{store:pe},i.a.createElement(O.a,null,i.a.createElement(de,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[47,1,2]]]);
//# sourceMappingURL=main.708c960e.chunk.js.map